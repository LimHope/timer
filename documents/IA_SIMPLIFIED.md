# 📐 간소화 스터디 타이머 - IA (3시간 구현 버전)

## 문서 정보
- **버전**: v1.0-simplified
- **작성일**: 2026-01-29
- **복잡도**: 최소 (페이지 2개 + 모달 1개)

---

## 1. 사이트 맵

### 1.1 전체 구조

```
/ (Root)
│
├── /timer          # 타이머 페이지 (메인)
├── /dashboard      # 대시보드 (세션 목록)
└── /chat (모달)    # AI 챗봇 모달
```

### 1.2 구조 다이어그램

```
┌─────────────────────────────┐
│     애플리케이션 구조        │
├─────────────────────────────┤
│                             │
│  [타이머 페이지]             │
│       ↕                     │
│  [대시보드 페이지]           │
│                             │
│  (언제든지 접근)             │
│       ↓                     │
│  [챗봇 모달]                │
│                             │
└─────────────────────────────┘
```

---

## 2. 페이지 계층 구조

### 2.1 계층도

```
Level 0: / (리디렉션 → /timer)
│
├─ Level 1: /timer (타이머 메인)
├─ Level 1: /dashboard (대시보드)
└─ Level 1: /chat (모달, URL 표시 안됨)
```

### 2.2 페이지 정보

| 페이지 | 경로 | 접근 빈도 | 기능 |
|--------|------|----------|------|
| 타이머 | `/timer` | 최고 | 25분 타이머 |
| 대시보드 | `/dashboard` | 중간 | 세션 목록 |
| 챗봇 | 모달 | 낮음 | AI 질문 답변 |

---

## 3. 사용자 플로우

### 3.1 첫 방문 플로우

```
START → / → 자동 리디렉션 → /timer
```

### 3.2 타이머 사용 플로우

```
/timer 페이지
  ↓
[시작] 버튼 클릭
  ↓
타이머 작동 (25분 카운트다운)
  ↓
25분 경과 → 알림
  ↓
Supabase에 세션 자동 저장
  ↓
선택:
  ├─ [다시 시작] → 타이머 리셋 후 재시작
  ├─ [대시보드] → /dashboard 이동
  └─ [리셋] → 타이머만 초기화
```

### 3.3 대시보드 확인 플로우

```
/dashboard 페이지
  ↓
데이터 로딩 (Supabase 조회)
  ↓
표시:
  • 오늘 총 공부 시간
  • 이번 주 총 공부 시간
  • 최근 50개 세션 목록
  ↓
[타이머로 돌아가기] 클릭
  ↓
/timer 이동
```

### 3.4 챗봇 사용 플로우

```
어느 페이지든지
  ↓
[💬 챗봇] 버튼 클릭
  ↓
모달 열림
  ↓
질문 입력 → Enter
  ↓
API 호출 (로딩 표시)
  ↓
AI 답변 표시
  ↓
[×] 버튼 클릭 → 모달 닫기
```

---

## 4. 네비게이션 구조

### 4.1 글로벌 네비게이션 (상단 헤더)

**Desktop & Mobile 공통**

```
┌──────────────────────────────────────┐
│ [타이머] [대시보드]          [💬]   │
└──────────────────────────────────────┘
```

**구성 요소:**
- **[타이머]**: `/timer` 이동
- **[대시보드]**: `/dashboard` 이동
- **[💬]**: 챗봇 모달 열기

**현재 페이지 표시:**
- 활성 탭은 밑줄 또는 색상 강조

---

## 5. 화면 레이아웃

### 5.1 타이머 페이지 (`/timer`)

#### Desktop 레이아웃

```
┌─────────────────────────────────────────┐
│  [타이머] [대시보드]              [💬]  │  ← 헤더
├─────────────────────────────────────────┤
│                                         │
│                                         │
│              ⏱ 24:35                   │  ← 큰 타이머 (클릭 추적)
│           (원형 타이머)                 │
│                                         │
│         집중도: ⭐⭐⭐⭐⭐             │  ← 집중도 표시
│      (타이머 확인 횟수 기반)            │
│                                         │
│      [시작] [정지] [리셋]              │  ← 제어 버튼
│                                         │
│                                         │
└─────────────────────────────────────────┘

※ 적응형 팝업 (20분 경과 시 자동 표시)
┌─────────────────────────────────────────┐
│                                         │
│   ┌────────────────────────────┐        │
│   │ 🚀 지금 흐름이 좋네요!      │        │
│   │    10분 더 집중할까요?      │        │
│   │                            │        │
│   │  [네, 계속] [아니요]       │        │
│   │  (5초 후 자동 연장)         │        │
│   └────────────────────────────┘        │
│                                         │
└─────────────────────────────────────────┘
```

#### Mobile 레이아웃

```
┌──────────────────────┐
│ [타이머][대시보드][💬]│
├──────────────────────┤
│                      │
│      ⏱ 24:35        │
│   (원형 타이머)      │
│                      │
│   집중도: ⭐⭐⭐⭐⭐  │
│                      │
│  [시작] [정지] [리셋] │
│                      │
└──────────────────────┘

※ 적응형 팝업 (풀스크린)
┌──────────────────────┐
│                      │
│ 🚀 지금 흐름이 좋네요! │
│ 10분 더 집중할까요?   │
│                      │
│   [네, 계속할래요]    │
│     [아니요]         │
│                      │
│ (5초 후 자동 연장)    │
└──────────────────────┘
```

#### 콘텐츠 우선순위
1. **타이머 (Primary)**: 화면 중앙, 가장 큰 크기, 클릭 추적
2. **집중도 표시 (Secondary)**: 타이머 하단, 실시간 업데이트
3. **제어 버튼 (Tertiary)**: 하단 고정
4. **적응형 팝업 (Overlay)**: 20분 경과 시 자동 표시

---

### 5.2 대시보드 페이지 (`/dashboard`)

#### Desktop 레이아웃

```
┌─────────────────────────────────────────┐
│  [타이머] [대시보드]              [💬]  │  ← 헤더
├─────────────────────────────────────────┤
│                                         │
│  📊 학습 통계                            │
│  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━  │
│                                         │
│  🕐 오늘: 2시간 30분 (6세션)             │
│  📅 이번 주: 8시간 15분 (20세션)         │
│                                         │
│  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━  │
│                                         │
│  📝 최근 세션                            │
│                                         │
│  • 1/29 14:30 - 14:55  (25분)          │
│    메모: 수학 - 미적분                   │
│                                         │
│  • 1/29 10:00 - 10:25  (25분)          │
│    메모: 영어 단어                       │
│                                         │
│  • 1/28 15:20 - 15:45  (25분)          │
│                                         │
│  (스크롤 가능)                           │
│                                         │
└─────────────────────────────────────────┘
```

#### Mobile 레이아웃

```
┌──────────────────────┐
│ [타이머][대시보드][💬]│
├──────────────────────┤
│ 📊 학습 통계          │
│ ──────────────────   │
│ 오늘: 2h 30m         │
│ 이번 주: 8h 15m      │
│                      │
│ 📝 최근 세션          │
│ ──────────────────   │
│ • 1/29 14:30         │
│   25분 - 수학        │
│                      │
│ • 1/29 10:00         │
│   25분 - 영어        │
│                      │
│ (스크롤)             │
└──────────────────────┘
```

#### 콘텐츠 구성
1. **통계 카드**: 오늘/주간 총 시간
2. **세션 리스트**: 시간순 정렬 (최신 → 과거)
   - 세션 타입 표시 (normal/extended/break_suggested)
   - 집중도 (별 개수로 시각화)

---

### 5.3 챗봇 모달 (`/chat`)

#### Desktop 레이아웃 (우측 슬라이드 패널)

```
                    ┌─────────────────────────┐
                    │ 💬 AI 학습 도우미  [×]  │  ← 헤더
                    ├─────────────────────────┤
                    │                         │
                    │ [대화 영역]              │
                    │                         │
                    │ 👤: 미적분 설명해줘     │
                    │                         │
                    │ 🤖: 미적분은 변화율을   │
                    │     연구하는 수학...    │
                    │                         │
                    │                         │
                    │ ↓ (스크롤 가능)          │
                    │                         │
                    ├─────────────────────────┤
                    │ [질문 입력창]      [전송]│  ← 입력
                    └─────────────────────────┘
                        (400px 너비)
```

#### Mobile 레이아웃 (풀스크린 모달)

```
┌──────────────────────┐
│ 💬 AI 도우미    [×]  │  ← 헤더
├──────────────────────┤
│                      │
│ 👤: 미적분 설명      │
│                      │
│ 🤖: 미적분은...      │
│                      │
│                      │
│ (대화 영역)          │
│                      │
│                      │
│                      │
├──────────────────────┤
│ [질문 입력]    [전송] │  ← 입력 (고정)
└──────────────────────┘
```

#### 인터랙션
- **입력**: Enter 키 또는 [전송] 버튼
- **닫기**: [×] 버튼 또는 ESC 키
- **스크롤**: 대화 영역 자동 스크롤 (최신 메시지로)

---

## 6. 컴포넌트 계층 구조

### 6.1 전체 컴포넌트 트리

```
App
├── Layout (공통 레이아웃)
│   ├── Header
│   │   ├── NavLink (타이머)
│   │   ├── NavLink (대시보드)
│   │   └── ChatButton
│   │
│   └── MainContent (children)
│
├── TimerPage (/timer)
│   ├── AdaptiveTimer
│   │   ├── CircleProgress
│   │   ├── TimeDisplay
│   │   ├── FocusIndicator (별 개수 표시)
│   │   └── AdaptivePrompt (연장/휴식 팝업)
│   │       ├── ExtendPrompt
│   │       └── BreakPrompt
│   └── ControlButtons
│       ├── StartButton
│       ├── StopButton
│       └── ResetButton
│
├── DashboardPage (/dashboard)
│   ├── StatsCard
│   │   ├── TodayStats
│   │   └── WeeklyStats
│   └── SessionList
│       └── SessionItem (반복)
│
└── ChatModal (전역)
    ├── ModalOverlay
    ├── ChatContainer
    │   ├── ChatHeader
    │   ├── MessageList
    │   │   ├── UserMessage (반복)
    │   │   └── AIMessage (반복)
    │   └── InputArea
    │       ├── TextInput
    │       └── SendButton
```

### 6.2 파일 구조

```
app/
├── layout.tsx                # 루트 레이아웃
├── page.tsx                  # / → redirect to /timer
│
├── timer/
│   └── page.tsx              # 타이머 페이지
│
├── dashboard/
│   └── page.tsx              # 대시보드 페이지
│
├── api/
│   └── chat/
│       └── route.ts          # 챗봇 API
│
└── components/
    ├── Header.tsx            # 공통 헤더
    ├── AdaptiveTimer.tsx     # 적응형 타이머
    ├── FocusIndicator.tsx    # 집중도 표시
    ├── AdaptivePrompt.tsx    # 연장/휴식 팝업
    ├── StatsCard.tsx         # 통계 카드
    ├── SessionList.tsx       # 세션 리스트
    └── ChatModal.tsx         # 챗봇 모달
```

---

## 7. URL 구조

### 7.1 URL 맵

| URL | 페이지 | 북마크 가능 | 설명 |
|-----|--------|-----------|------|
| `/` | 리디렉션 | O | → `/timer` |
| `/timer` | 타이머 | O | 메인 페이지 |
| `/dashboard` | 대시보드 | O | 세션 목록 |
| `/chat` | (모달) | X | 모달은 URL 변경 없음 |

### 7.2 리디렉션

```typescript
// app/page.tsx
import { redirect } from 'next/navigation'

export default function HomePage() {
  redirect('/timer')
}
```

---

## 8. 인터랙션 패턴

### 8.1 적응형 타이머 제어

```
[시작] 버튼
  ↓
타이머 시작 (기본 25분)
  ↓
사용자가 타이머 클릭 시 → 확인 횟수 +1
  ↓
20분 경과 (5분 남음)
  ↓
집중도 체크 (최근 5분간 확인 횟수)
  ↓
  [확인 1회 이하] → "10분 더?" 팝업
    → 수락 시 타이머 +10분

  [확인 3회 이상] → "5분 휴식?" 팝업
    → 수락 시 세션 종료 + 휴식 시작
  ↓
0초 도달 → 알림
  ↓
Supabase 저장 (시간, 확인 횟수, 세션 타입)
```

### 8.2 챗봇 인터랙션

```
[💬] 버튼 클릭
  ↓
모달 오픈 (fade-in 애니메이션)
  ↓
질문 입력
  ↓
Enter 또는 [전송] 클릭
  ↓
로딩 표시 (점 3개 애니메이션)
  ↓
API 응답 → 답변 표시 (타이핑 효과)
  ↓
추가 질문 가능
```

### 8.3 피드백 메커니즘

| 액션 | 피드백 |
|------|--------|
| 타이머 시작 | 버튼 색상 변경 + "시작됨" 텍스트 |
| 타이머 클릭 | 확인 횟수 +1, 집중도 별 감소 (시각적) |
| 집중 중 감지 | "🚀 흐름이 좋네요!" 팝업 (초록색) |
| 피로 감지 | "😌 쉬어가요!" 팝업 (주황색) |
| 타이머 연장 | "+10분 추가됨" 토스트 |
| 타이머 종료 | 브라우저 알림 + 성공 메시지 |
| 세션 저장 성공 | 토스트 메시지 "세션 저장 완료" |
| 챗봇 로딩 | 점 3개 애니메이션 "생각 중..." |
| 에러 | 빨간색 토스트 "오류 발생" |

---

## 9. 반응형 디자인

### 9.1 브레이크포인트

```css
/* Tailwind CSS 기준 */
sm: 640px   /* 모바일 */
md: 768px   /* 태블릿 */
lg: 1024px  /* 데스크톱 */
```

### 9.2 반응형 변화

| 요소 | Desktop | Mobile |
|------|---------|--------|
| 헤더 | 전체 너비, 항목 가로 배치 | 전체 너비, 항목 축소 |
| 타이머 | 280px 원형 | 200px 원형 |
| 챗봇 | 우측 400px 패널 | 풀스크린 모달 |
| 버튼 | 가로 배치 | 가로 배치 (크기 축소) |

---

## 10. 성능 최적화

### 10.1 초기 로딩
- **Code Splitting**: 페이지별 lazy loading
- **이미지**: 없음 (텍스트/아이콘만)
- **폰트**: 시스템 폰트 우선

### 10.2 데이터 로딩
- **대시보드**: 최근 50개만 조회 (페이지네이션 없음)
- **타이머**: 로컬 상태 (Supabase 저장만)

---

## 11. 접근성 (간소화)

### 11.1 키보드 네비게이션
- **Tab**: 버튼 간 이동
- **Enter**: 버튼 실행
- **ESC**: 모달 닫기

### 11.2 스크린 리더
- 모든 버튼에 `aria-label`
- 타이머 시간 변경 시 `aria-live="polite"`

---

## 12. 비교: 원본 vs 간소화

| 항목 | 원본 IA | 간소화 IA |
|------|---------|----------|
| 페이지 수 | 15+ | 2개 |
| 모달/팝업 수 | 5+ | 3개 (챗봇 + 연장 + 휴식) |
| 네비게이션 레벨 | 3 depth | 1 depth |
| 사용자 플로우 | 7개 | 3개 (적응형 추가) |
| 컴포넌트 수 | 50+ | 10개 |
| 적응형 기능 | 복잡 (4가지 요인) | 간소화 (1가지 요인) |
| 복잡도 | 높음 | 중간 |
| 구현 시간 | 6시간+ | 1.5시간 |

---

## 13. 화면 프로토타입 (ASCII)

### 13.1 타이머 페이지 전체

```
┌─────────────────────────────────────────────┐
│                                             │
│  [타이머] [대시보드]                [💬]    │
│                                             │
├─────────────────────────────────────────────┤
│                                             │
│                                             │
│                                             │
│                                             │
│                  ⏱                          │
│                24:35                        │
│            (클릭 시 추적)                    │
│                                             │
│           집중도: ⭐⭐⭐⭐⭐                 │
│                                             │
│         [시작]  [정지]  [리셋]              │
│                                             │
│                                             │
│    ※ 20분 경과 시 팝업 자동 표시             │
│                                             │
│                                             │
└─────────────────────────────────────────────┘
```

### 13.2 대시보드 페이지 전체

```
┌─────────────────────────────────────────────┐
│  [타이머] [대시보드]                [💬]    │
├─────────────────────────────────────────────┤
│                                             │
│  📊 학습 통계                                │
│  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━  │
│  🕐 오늘: 2시간 30분 (6세션)                 │
│  📅 이번 주: 8시간 15분 (20세션)             │
│                                             │
│  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━  │
│                                             │
│  📝 최근 세션                                │
│                                             │
│  • 1/29 14:30 - 14:55  (25분) ⭐⭐⭐⭐⭐    │
│    수학 - 미적분 [정상 완료]                 │
│                                             │
│  • 1/29 10:00 - 10:35  (35분) ⭐⭐⭐⭐⭐⭐   │
│    영어 단어 [연장됨 🚀]                    │
│                                             │
│  • 1/28 15:20 - 15:40  (20분) ⭐⭐         │
│    코딩 [휴식 제안됨 😌]                    │
│                                             │
│  (더 많은 세션...)                           │
│                                             │
└─────────────────────────────────────────────┘
```

---

**문서 버전**: v1.1-simplified-adaptive
**작성일**: 2026-01-29
**최종 수정**: 2026-01-29 (적응형 UI 추가)
**구현 난이도**: ⭐⭐ (초급~중급)
**예상 구현 시간**: 1.5시간 (UI 구조 + 적응형 팝업)
