# ğŸ“± ê°„ì†Œí™” ìŠ¤í„°ë”” íƒ€ì´ë¨¸ PRD (3ì‹œê°„ êµ¬í˜„ ë²„ì „)

## 1. ì œí’ˆ ê°œìš”

### 1.1 ì œí’ˆ ì„¤ëª…
ê¸°ë³¸ íƒ€ì´ë¨¸ì™€ í•™ìŠµ ì„¸ì…˜ ê¸°ë¡, AI ì±—ë´‡ì„ ì œê³µí•˜ëŠ” ì‹¬í”Œí•œ ìŠ¤í„°ë”” ë„êµ¬ì…ë‹ˆë‹¤.

### 1.2 í•µì‹¬ ê°€ì¹˜
- **ì ì‘í˜• íƒ€ì´ë¨¸**: ì§‘ì¤‘ë„ì— ë”°ë¼ ìë™ ì—°ì¥/íœ´ì‹ ì œì•ˆ
- **ì„¸ì…˜ ê¸°ë¡**: í•™ìŠµ ì‹œê°„ ìë™ ì €ì¥
- **AI ì±—ë´‡**: í•™ìŠµ ì¤‘ ì§ˆë¬¸ ë‹µë³€

### 1.3 íƒ€ê²Ÿ ì‚¬ìš©ì
í˜¼ì ê³µë¶€í•˜ëŠ” í•™ìŠµì (ë‹¨ì¼ ì‚¬ìš©ì, ì¸ì¦ ë¶ˆí•„ìš”)

---

## 2. í•µì‹¬ ê¸°ëŠ¥ (MUST HAVE)

### 2.1 ì ì‘í˜• íƒ€ì´ë¨¸
**ê¸°ëŠ¥**
- ê¸°ë³¸ 25ë¶„ íƒ€ì´ë¨¸
- ì‹œì‘/ì •ì§€/ë¦¬ì…‹ ë²„íŠ¼
- **íƒ€ì´ë¨¸ í™•ì¸ ë¹ˆë„ ì¶”ì ** (í•µì‹¬!)
- **ì§‘ì¤‘ë„ ê¸°ë°˜ ìë™ ì œì•ˆ**:
  - ì§‘ì¤‘ ì¤‘ â†’ ì—°ì¥ ì œì•ˆ (ìµœëŒ€ 50ë¶„)
  - í”¼ë¡œ ê°ì§€ â†’ íœ´ì‹ ì œì•ˆ (5ë¶„)

**ì ì‘í˜• ë¡œì§ (ê°„ì†Œí™”)**
```
[20ë¶„ ê²½ê³¼ ì‹œì ]
  â†“
ìµœê·¼ 5ë¶„ê°„ íƒ€ì´ë¨¸ í™•ì¸ íšŸìˆ˜ ê³„ì‚°
  â†“
í™•ì¸ 1íšŒ ì´í•˜ â†’ "ì§‘ì¤‘ ì¤‘! 10ë¶„ ë” í• ê¹Œìš”?" íŒì—…
í™•ì¸ 3íšŒ ì´ìƒ â†’ "ì ê¹ ì‰¬ì–´ê°€ìš”! 5ë¶„ íœ´ì‹?" íŒì—…
  â†“
ì‚¬ìš©ì ì„ íƒ (5ì´ˆ í›„ ìë™ ì§„í–‰)
```

**UI**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      â± 24:35           â”‚
â”‚   (í° ì›í˜• íƒ€ì´ë¨¸)       â”‚
â”‚                         â”‚
â”‚   ì§‘ì¤‘ë„: â­â­â­â­â­     â”‚  â† ìƒˆë¡œ ì¶”ê°€
â”‚   (íƒ€ì´ë¨¸ í™•ì¸ íšŸìˆ˜ ê¸°ë°˜) â”‚
â”‚                         â”‚
â”‚  [ì‹œì‘] [ì •ì§€] [ë¦¬ì…‹]   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ì œì•ˆ íŒì—… UI**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸš€ ì§€ê¸ˆ íë¦„ì´ ì¢‹ë„¤ìš”!      â”‚
â”‚    10ë¶„ ë” ì§‘ì¤‘í• ê¹Œìš”?      â”‚
â”‚                            â”‚
â”‚  [ë„¤, ê³„ì†í• ë˜ìš”] [ì•„ë‹ˆìš”]  â”‚
â”‚  (5ì´ˆ í›„ ìë™ìœ¼ë¡œ ì—°ì¥)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 ì„¸ì…˜ ìë™ ì €ì¥ (Supabase)
**ì €ì¥ ë°ì´í„°**
- ì‹œì‘ ì‹œê°„
- ì¢…ë£Œ ì‹œê°„
- ì´ ê³µë¶€ ì‹œê°„
- **íƒ€ì´ë¨¸ í™•ì¸ íšŸìˆ˜** (ì§‘ì¤‘ë„ ì¶”ì ìš©)
- **ì„¸ì…˜ íƒ€ì…** (normal/extended/break)
- ë©”ëª¨ (ì„ íƒ)

**Supabase í…Œì´ë¸”**
```sql
CREATE TABLE study_sessions (
  id uuid PRIMARY KEY DEFAULT gen_random_uuid(),
  started_at timestamptz NOT NULL,
  ended_at timestamptz,
  duration_minutes integer,
  timer_check_count integer DEFAULT 0,  -- ìƒˆë¡œ ì¶”ê°€
  session_type varchar(20) DEFAULT 'normal',  -- ìƒˆë¡œ ì¶”ê°€
  note text,
  created_at timestamptz DEFAULT now()
);
```

### 2.3 ëŒ€ì‹œë³´ë“œ (ì„¸ì…˜ ëª©ë¡)
**ê¸°ëŠ¥**
- ìµœê·¼ ì„¸ì…˜ ëª©ë¡ (ìµœëŒ€ 50ê°œ)
- ì˜¤ëŠ˜ ì´ ê³µë¶€ ì‹œê°„
- ì´ë²ˆ ì£¼ ì´ ê³µë¶€ ì‹œê°„

**UI**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“Š í•™ìŠµ ê¸°ë¡                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ì˜¤ëŠ˜: 2ì‹œê°„ 30ë¶„               â”‚
â”‚ ì´ë²ˆ ì£¼: 8ì‹œê°„ 15ë¶„            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ìµœê·¼ ì„¸ì…˜                     â”‚
â”‚ â€¢ 1/29 14:30 - 25ë¶„ ê³µë¶€      â”‚
â”‚ â€¢ 1/29 10:00 - 25ë¶„ ê³µë¶€      â”‚
â”‚ â€¢ 1/28 15:20 - 25ë¶„ ê³µë¶€      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.4 AI ì±—ë´‡ (ê°„ë‹¨ ë²„ì „)
**ê¸°ëŠ¥**
- ì§ˆë¬¸ ì…ë ¥ â†’ OpenAI/Claude API í˜¸ì¶œ
- ë‹µë³€ í‘œì‹œ
- ëŒ€í™” íˆìŠ¤í† ë¦¬ (ì„¸ì…˜ ë‹¨ìœ„, ì €ì¥ ì•ˆí•¨)

**UI**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ’¬ AI í•™ìŠµ ë„ìš°ë¯¸    [Ã—] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ‘¤: ë¯¸ì ë¶„ ì„¤ëª…í•´ì¤˜      â”‚
â”‚ ğŸ¤–: ë¯¸ì ë¶„ì€...          â”‚
â”‚                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [ì§ˆë¬¸ ì…ë ¥]         [ì „ì†¡]â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. ê¸°ìˆ  ìŠ¤íƒ (ìµœì†Œ êµ¬ì„±)

### 3.1 í”„ë¡ íŠ¸ì—”ë“œ
- **Framework**: Next.js (App Router)
- **ìŠ¤íƒ€ì¼ë§**: Tailwind CSS
- **ìƒíƒœ**: useState/useEffect (Context ë¶ˆí•„ìš”)

### 3.2 ë°±ì—”ë“œ/DB
- **Database**: Supabase (PostgreSQL)
- **ì¸ì¦**: ì—†ìŒ (ë‹¨ì¼ ì‚¬ìš©ì, ì§ì ‘ ì ‘ê·¼)

### 3.3 AI
- **LLM API**: OpenAI GPT-4-mini ë˜ëŠ” Claude
- **í†µì‹ **: Next.js API Route

### 3.4 ë°°í¬
- **Hosting**: Vercel (ë¬´ë£Œ)

---

## 4. ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ (ê°„ì†Œí™”)

### 4.1 study_sessions í…Œì´ë¸”
```sql
CREATE TABLE study_sessions (
  id uuid PRIMARY KEY DEFAULT gen_random_uuid(),
  started_at timestamptz NOT NULL DEFAULT now(),
  ended_at timestamptz,
  duration_minutes integer,
  timer_check_count integer DEFAULT 0,
  session_type varchar(20) DEFAULT 'normal',
  note text,
  created_at timestamptz NOT NULL DEFAULT now()
);

-- ìµœê·¼ ì„¸ì…˜ ì¡°íšŒìš© ì¸ë±ìŠ¤
CREATE INDEX idx_sessions_created
  ON study_sessions(created_at DESC);

-- ì œì•½ì¡°ê±´
ALTER TABLE study_sessions
  ADD CONSTRAINT chk_timer_check_positive
  CHECK (timer_check_count >= 0);

ALTER TABLE study_sessions
  ADD CONSTRAINT chk_session_type
  CHECK (session_type IN ('normal', 'extended', 'break_suggested'));
```

---

## 5. í˜ì´ì§€ êµ¬ì¡°

### 5.1 ì‚¬ì´íŠ¸ë§µ
```
/ (Root - ë©”ì¸ í˜ì´ì§€)
â”‚
â”œâ”€â”€ /timer        # íƒ€ì´ë¨¸ í™”ë©´ (ë©”ì¸)
â””â”€â”€ /dashboard    # ëŒ€ì‹œë³´ë“œ (ì„¸ì…˜ ëª©ë¡)
```

### 5.2 ë¼ìš°íŒ…
```
app/
â”œâ”€â”€ page.tsx              # â†’ redirect to /timer
â”œâ”€â”€ timer/
â”‚   â””â”€â”€ page.tsx          # íƒ€ì´ë¨¸ ë©”ì¸ í™”ë©´
â”œâ”€â”€ dashboard/
â”‚   â””â”€â”€ page.tsx          # ëŒ€ì‹œë³´ë“œ
â””â”€â”€ api/
    â””â”€â”€ chat/
        â””â”€â”€ route.ts      # AI ì±—ë´‡ API
```

---

## 6. ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°

```
app/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ Timer.tsx            # íƒ€ì´ë¨¸ ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ ChatModal.tsx        # ì±—ë´‡ ëª¨ë‹¬
â”‚   â”œâ”€â”€ SessionList.tsx      # ì„¸ì…˜ ëª©ë¡
â”‚   â””â”€â”€ Stats.tsx            # í†µê³„ ì¹´ë“œ
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ supabase.ts          # Supabase í´ë¼ì´ì–¸íŠ¸
â”‚   â””â”€â”€ api.ts               # API í—¬í¼
â””â”€â”€ types/
    â””â”€â”€ index.ts             # íƒ€ì… ì •ì˜
```

---

## 7. ì‚¬ìš©ì í”Œë¡œìš°

### 7.1 ì ì‘í˜• íƒ€ì´ë¨¸ ì‚¬ìš© í”Œë¡œìš°
```
1. /timer ì ‘ì†
   â†“
2. [ì‹œì‘] ë²„íŠ¼ í´ë¦­ â†’ íƒ€ì´ë¨¸ ì‹œì‘ (25ë¶„ ê¸°ë³¸)
   â†“
3. ê³µë¶€ ì¤‘ (íƒ€ì´ë¨¸ í´ë¦­ ì‹œë§ˆë‹¤ ì¹´ìš´íŠ¸ ì¦ê°€)
   â†“
4. 20ë¶„ ê²½ê³¼ â†’ ì§‘ì¤‘ë„ ì²´í¬
   â†“
   [ì§‘ì¤‘ ì¤‘] (í™•ì¸ 1íšŒ ì´í•˜)
     â†’ "10ë¶„ ë” í• ê¹Œìš”?" íŒì—…
     â†’ ìˆ˜ë½ ì‹œ íƒ€ì´ë¨¸ 35ë¶„ìœ¼ë¡œ ì—°ì¥

   [í”¼ë¡œ ê°ì§€] (í™•ì¸ 3íšŒ ì´ìƒ)
     â†’ "5ë¶„ íœ´ì‹?" íŒì—…
     â†’ ìˆ˜ë½ ì‹œ 5ë¶„ íœ´ì‹ íƒ€ì´ë¨¸ ì‹œì‘
   â†“
5. íƒ€ì´ë¨¸ ì¢…ë£Œ â†’ ì•Œë¦¼
   â†“
6. Supabase ì €ì¥ (ì‹œê°„ + í™•ì¸ íšŸìˆ˜ + ì„¸ì…˜ íƒ€ì…)
   â†“
7. [ë‹¤ì‹œ ì‹œì‘] ë˜ëŠ” [ëŒ€ì‹œë³´ë“œ ë³´ê¸°] ì„ íƒ
```

### 7.2 ì±—ë´‡ ì‚¬ìš© í”Œë¡œìš°
```
1. [ğŸ’¬ ì±—ë´‡] ë²„íŠ¼ í´ë¦­
   â†“
2. ëª¨ë‹¬ ì—´ë¦¼
   â†“
3. ì§ˆë¬¸ ì…ë ¥ â†’ Enter
   â†“
4. API í˜¸ì¶œ â†’ AI ë‹µë³€
   â†“
5. ë‹µë³€ í‘œì‹œ
```

---

## 8. API ì„¤ê³„

### 8.1 ì„¸ì…˜ ì¡°íšŒ
```typescript
// GET /api/sessions
Response: {
  sessions: [
    {
      id: string,
      started_at: string,
      ended_at: string,
      duration_minutes: number,
      note: string
    }
  ]
}
```

### 8.2 ì±—ë´‡
```typescript
// POST /api/chat
Request: {
  message: string
}

Response: {
  reply: string
}
```

---

## 9. í™˜ê²½ ë³€ìˆ˜

```env
# Supabase
NEXT_PUBLIC_SUPABASE_URL=your-project-url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key

# OpenAI (ë˜ëŠ” Claude)
OPENAI_API_KEY=your-api-key
```

---

## 10. 3ì‹œê°„ êµ¬í˜„ ì²´í¬ë¦¬ìŠ¤íŠ¸

### Phase 1: í”„ë¡œì íŠ¸ ì…‹ì—… (30ë¶„)
- [ ] Next.js í”„ë¡œì íŠ¸ ìƒì„±
- [ ] Tailwind CSS ì„¤ì •
- [ ] Supabase í”„ë¡œì íŠ¸ ìƒì„±
- [ ] í™˜ê²½ ë³€ìˆ˜ ì„¤ì •

### Phase 2: ì ì‘í˜• íƒ€ì´ë¨¸ êµ¬í˜„ (90ë¶„) â±ï¸ ì¶”ê°€ 30ë¶„
- [ ] Timer ì»´í¬ë„ŒíŠ¸ (ì¹´ìš´íŠ¸ë‹¤ìš´)
- [ ] íƒ€ì´ë¨¸ í´ë¦­ ì¶”ì  ë¡œì§
- [ ] ì§‘ì¤‘ë„ ê³„ì‚° (ìµœê·¼ 5ë¶„ê°„ í´ë¦­ íšŸìˆ˜)
- [ ] 20ë¶„ ê²½ê³¼ ì‹œ ìë™ ì²´í¬
- [ ] ì—°ì¥/íœ´ì‹ ì œì•ˆ íŒì—…
- [ ] 5ì´ˆ ìë™ ì§„í–‰ íƒ€ì´ë¨¸
- [ ] Supabase ì„¸ì…˜ ì €ì¥ (í™•ì¸ íšŸìˆ˜ í¬í•¨)

### Phase 3: ëŒ€ì‹œë³´ë“œ (30ë¶„) â±ï¸ ì‹œê°„ ë‹¨ì¶•
- [ ] Supabase ì„¸ì…˜ ëª©ë¡ ì¡°íšŒ
- [ ] SessionList ì»´í¬ë„ŒíŠ¸ (ì„¸ì…˜ íƒ€ì… í‘œì‹œ)
- [ ] Stats ì»´í¬ë„ŒíŠ¸

### Phase 4: AI ì±—ë´‡ (30ë¶„) â±ï¸ ì‹œê°„ ë‹¨ì¶•
- [ ] ChatModal ì»´í¬ë„ŒíŠ¸
- [ ] /api/chat API Route
- [ ] OpenAI API ì—°ë™

---

## 11. ì œì™¸ëœ ê¸°ëŠ¥ (ì›ë³¸ PRD ëŒ€ë¹„)

### ì œê±°ëœ ë³µì¡ ê¸°ëŠ¥
- âŒ ì‚¬ìš©ì ì¸ì¦/ë¡œê·¸ì¸
- âŒ **ë¬¸ì œ í’€ì´ ì†ë„/ì •ë‹µë¥  ì¶”ì ** (ë³µì¡í•¨)
- âŒ **ë‹¤ì¤‘ ìš”ì¸ ì§‘ì¤‘ë„ ê³„ì‚°** (ë¬¸ì œ í’€ì´, ì§ˆë¬¸ í’ˆì§ˆ ë“±)
- âŒ íœ´ì‹ ëª¨ë“œ í’€ìŠ¤í¬ë¦° (ìŒì•…, ì• ë‹ˆë©”ì´ì…˜)
- âŒ AI ì¸ì‚¬ì´íŠ¸ ìë™ ìƒì„±
- âŒ ì‹œê°„ëŒ€ë³„ íˆíŠ¸ë§µ
- âŒ ê³¼ëª©ë³„ í†µê³„
- âŒ ëŒ€í™” íˆìŠ¤í† ë¦¬ ì €ì¥

### ìœ ì§€/ê°„ì†Œí™”ëœ í•µì‹¬ ê¸°ëŠ¥
- âœ… **ì ì‘í˜• íƒ€ì´ë¨¸**: íƒ€ì´ë¨¸ í™•ì¸ ë¹ˆë„ë§Œìœ¼ë¡œ ì§‘ì¤‘ë„ ì¶”ì •
  - ì›ë³¸: 4ê°€ì§€ ìš”ì¸ (ë¬¸ì œ ì†ë„, ì •ë‹µë¥ , íƒ€ì´ë¨¸, ì§ˆë¬¸)
  - ê°„ì†Œí™”: **1ê°€ì§€ ìš”ì¸** (íƒ€ì´ë¨¸ í™•ì¸ë§Œ)
- âœ… **ìë™ ì—°ì¥/íœ´ì‹ ì œì•ˆ**: 20ë¶„ ì‹œì ì— 1íšŒë§Œ ì²´í¬
- âœ… **ì§‘ì¤‘ë„ í‘œì‹œ**: ë³„ 1~5ê°œ (ì‹œê°ì  í”¼ë“œë°±)
- âœ… ì €ì¥: ì‹œê°„ + í™•ì¸ íšŸìˆ˜ + ì„¸ì…˜ íƒ€ì…
- âœ… ëŒ€ì‹œë³´ë“œ: ëª©ë¡ë§Œ (ì°¨íŠ¸ ì—†ìŒ)
- âœ… ì±—ë´‡: ê¸°ë³¸ Q&A

---

## 12. í™”ë©´ ë ˆì´ì•„ì›ƒ (ê°„ì†Œí™”)

### 12.1 íƒ€ì´ë¨¸ í˜ì´ì§€
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [íƒ€ì´ë¨¸]  [ëŒ€ì‹œë³´ë“œ]        [ğŸ’¬]  â”‚  â† í—¤ë”
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚                                     â”‚
â”‚            â± 24:35                 â”‚
â”‚         (í° íƒ€ì´ë¨¸ í‘œì‹œ)            â”‚
â”‚                                     â”‚
â”‚                                     â”‚
â”‚      [ì‹œì‘] [ì •ì§€] [ë¦¬ì…‹]          â”‚
â”‚                                     â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 12.2 ëŒ€ì‹œë³´ë“œ í˜ì´ì§€
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [íƒ€ì´ë¨¸]  [ëŒ€ì‹œë³´ë“œ]        [ğŸ’¬]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“Š í•™ìŠµ í†µê³„                        â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚  ì˜¤ëŠ˜: 2ì‹œê°„ 30ë¶„                    â”‚
â”‚  ì´ë²ˆ ì£¼: 8ì‹œê°„ 15ë¶„                 â”‚
â”‚                                     â”‚
â”‚  ğŸ“ ìµœê·¼ ì„¸ì…˜                        â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚  â€¢ 1/29 14:30 - 25ë¶„                â”‚
â”‚  â€¢ 1/29 10:00 - 25ë¶„                â”‚
â”‚  â€¢ 1/28 15:20 - 25ë¶„                â”‚
â”‚  ...                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 13. ì½”ë“œ ì˜ˆì‹œ (í•µì‹¬ ë¶€ë¶„)

### 13.1 ì ì‘í˜• íƒ€ì´ë¨¸ ì»´í¬ë„ŒíŠ¸
```typescript
'use client'
import { useState, useEffect } from 'react'

export default function AdaptiveTimer() {
  const [seconds, setSeconds] = useState(25 * 60)
  const [isActive, setIsActive] = useState(false)
  const [startTime, setStartTime] = useState<Date | null>(null)
  const [timerCheckCount, setTimerCheckCount] = useState(0)
  const [checkTimestamps, setCheckTimestamps] = useState<number[]>([])
  const [showPrompt, setShowPrompt] = useState<'extend' | 'break' | null>(null)
  const [sessionType, setSessionType] = useState<'normal' | 'extended' | 'break_suggested'>('normal')

  // íƒ€ì´ë¨¸ ì¹´ìš´íŠ¸ë‹¤ìš´
  useEffect(() => {
    let interval: NodeJS.Timeout | null = null
    if (isActive && seconds > 0) {
      interval = setInterval(() => {
        setSeconds(s => s - 1)
      }, 1000)
    } else if (seconds === 0) {
      handleSessionEnd()
    }
    return () => { if (interval) clearInterval(interval) }
  }, [isActive, seconds])

  // 20ë¶„ ê²½ê³¼ ì‹œ ì§‘ì¤‘ë„ ì²´í¬
  useEffect(() => {
    if (seconds === 5 * 60 && isActive) { // 20ë¶„ ê²½ê³¼ (25-5=20)
      checkFocusLevel()
    }
  }, [seconds, isActive])

  // íƒ€ì´ë¨¸ í´ë¦­ ì‹œ (ì‚¬ìš©ìê°€ íƒ€ì´ë¨¸ í™•ì¸)
  const handleTimerClick = () => {
    setTimerCheckCount(prev => prev + 1)
    setCheckTimestamps(prev => [...prev, Date.now()])
  }

  // ì§‘ì¤‘ë„ ì²´í¬
  const checkFocusLevel = () => {
    const fiveMinutesAgo = Date.now() - 5 * 60 * 1000
    const recentChecks = checkTimestamps.filter(t => t > fiveMinutesAgo).length

    if (recentChecks <= 1) {
      // ì§‘ì¤‘ ì¤‘ â†’ ì—°ì¥ ì œì•ˆ
      setShowPrompt('extend')
      setTimeout(() => {
        if (showPrompt === 'extend') handleExtend()
      }, 5000) // 5ì´ˆ í›„ ìë™ ì—°ì¥
    } else if (recentChecks >= 3) {
      // í”¼ë¡œ ê°ì§€ â†’ íœ´ì‹ ì œì•ˆ
      setShowPrompt('break')
      setTimeout(() => {
        if (showPrompt === 'break') handleBreak()
      }, 5000) // 5ì´ˆ í›„ ìë™ íœ´ì‹
    }
  }

  // ì—°ì¥ ìˆ˜ë½
  const handleExtend = () => {
    setSeconds(prev => prev + 10 * 60) // 10ë¶„ ì¶”ê°€
    setSessionType('extended')
    setShowPrompt(null)
  }

  // íœ´ì‹ ìˆ˜ë½
  const handleBreak = () => {
    setSessionType('break_suggested')
    handleSessionEnd() // í˜„ì¬ ì„¸ì…˜ ì¢…ë£Œ
    // 5ë¶„ íœ´ì‹ íƒ€ì´ë¨¸ ì‹œì‘ (ë³„ë„ êµ¬í˜„ í•„ìš”)
    setShowPrompt(null)
  }

  // ì„¸ì…˜ ì¢…ë£Œ
  const handleSessionEnd = async () => {
    if (!startTime) return

    const endTime = new Date()
    const duration = Math.floor((endTime.getTime() - startTime.getTime()) / 60000)

    await saveSession({
      started_at: startTime,
      ended_at: endTime,
      duration_minutes: duration,
      timer_check_count: timerCheckCount,
      session_type: sessionType
    })

    alert(`${duration}ë¶„ ì™„ë£Œ!`)
    setIsActive(false)
    setSeconds(25 * 60)
    setTimerCheckCount(0)
    setCheckTimestamps([])
    setSessionType('normal')
  }

  const minutes = Math.floor(seconds / 60)
  const secs = seconds % 60
  const focusScore = Math.max(1, Math.min(5, 6 - Math.floor(timerCheckCount / 2)))

  return (
    <div className="flex flex-col items-center gap-8">
      {/* íƒ€ì´ë¨¸ (í´ë¦­ ì‹œ ì¹´ìš´íŠ¸ ì¦ê°€) */}
      <div
        className="text-8xl font-mono cursor-pointer"
        onClick={handleTimerClick}
      >
        {String(minutes).padStart(2, '0')}:{String(secs).padStart(2, '0')}
      </div>

      {/* ì§‘ì¤‘ë„ í‘œì‹œ */}
      <div className="text-xl">
        ì§‘ì¤‘ë„: {'â­'.repeat(focusScore)}
      </div>

      {/* ì œì–´ ë²„íŠ¼ */}
      <div className="flex gap-4">
        <button onClick={() => { setIsActive(true); setStartTime(new Date()) }}>
          ì‹œì‘
        </button>
        <button onClick={() => setIsActive(false)}>ì •ì§€</button>
        <button onClick={() => setSeconds(25 * 60)}>ë¦¬ì…‹</button>
      </div>

      {/* ì ì‘í˜• ì œì•ˆ íŒì—… */}
      {showPrompt === 'extend' && (
        <div className="fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2
                        bg-white p-6 rounded-lg shadow-xl">
          <p className="text-xl mb-4">ğŸš€ ì§€ê¸ˆ íë¦„ì´ ì¢‹ë„¤ìš”!</p>
          <p className="mb-4">10ë¶„ ë” ì§‘ì¤‘í• ê¹Œìš”?</p>
          <div className="flex gap-4">
            <button onClick={handleExtend}>ë„¤, ê³„ì†í• ë˜ìš”</button>
            <button onClick={() => setShowPrompt(null)}>ì•„ë‹ˆìš”</button>
          </div>
          <p className="text-sm text-gray-500 mt-2">(5ì´ˆ í›„ ìë™ ì—°ì¥)</p>
        </div>
      )}

      {showPrompt === 'break' && (
        <div className="fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2
                        bg-white p-6 rounded-lg shadow-xl">
          <p className="text-xl mb-4">ğŸ˜Œ ì ê¹ ì‰¬ì–´ê°€ëŠ” ê²Œ ì¢‹ê² ì–´ìš”</p>
          <p className="mb-4">5ë¶„ íœ´ì‹ì„ ì‹œì‘í• ê¹Œìš”?</p>
          <div className="flex gap-4">
            <button onClick={handleBreak}>íœ´ì‹ ì‹œì‘</button>
            <button onClick={() => setShowPrompt(null)}>5ë¶„ë§Œ ë”</button>
          </div>
          <p className="text-sm text-gray-500 mt-2">(5ì´ˆ í›„ ìë™ íœ´ì‹)</p>
        </div>
      )}
    </div>
  )
}
```

### 13.2 ì±—ë´‡ API
```typescript
// app/api/chat/route.ts
import { OpenAI } from 'openai'

const openai = new OpenAI({ apiKey: process.env.OPENAI_API_KEY })

export async function POST(req: Request) {
  const { message } = await req.json()

  const completion = await openai.chat.completions.create({
    model: "gpt-4-turbo-preview",
    messages: [
      { role: "system", content: "ë‹¹ì‹ ì€ í•™ìŠµì„ ë•ëŠ” AI ë„ìš°ë¯¸ì…ë‹ˆë‹¤." },
      { role: "user", content: message }
    ]
  })

  return Response.json({
    reply: completion.choices[0].message.content
  })
}
```

---

## 14. ë°°í¬ ê°€ì´ë“œ

### 14.1 Vercel ë°°í¬
```bash
# 1. Vercel CLI ì„¤ì¹˜
npm i -g vercel

# 2. ë°°í¬
vercel

# 3. í™˜ê²½ ë³€ìˆ˜ ì„¤ì • (Vercel ëŒ€ì‹œë³´ë“œ)
NEXT_PUBLIC_SUPABASE_URL
NEXT_PUBLIC_SUPABASE_ANON_KEY
OPENAI_API_KEY
```

---

## 15. í–¥í›„ í™•ì¥ ê°€ëŠ¥ ê¸°ëŠ¥

### Phase 2 (ì¶”ê°€ 1-2ì‹œê°„)
- ë©”ëª¨ ê¸°ëŠ¥ (ì„¸ì…˜ ì¢…ë£Œ ì‹œ ê°„ë‹¨í•œ ë©”ëª¨ ì…ë ¥)
- ì£¼ê°„ ì°¨íŠ¸ (ë§‰ëŒ€ ê·¸ë˜í”„)

### Phase 3 (ì¶”ê°€ 2-3ì‹œê°„)
- ê³¼ëª©ë³„ ë¶„ë¥˜
- ê°„ë‹¨í•œ í†µê³„ (ê°€ì¥ ë§ì´ ê³µë¶€í•œ ìš”ì¼)

---

**ë¬¸ì„œ ë²„ì „**: v1.1-simplified-adaptive
**ì‘ì„±ì¼**: 2026-01-29
**ìµœì¢… ìˆ˜ì •**: 2026-01-29 (ì ì‘í˜• íƒ€ì´ë¨¸ ì¶”ê°€)
**ëª©í‘œ êµ¬í˜„ ì‹œê°„**: 3ì‹œê°„ (ì…‹ì—… 30ë¶„ + íƒ€ì´ë¨¸ 90ë¶„ + ëŒ€ì‹œë³´ë“œ 30ë¶„ + ì±—ë´‡ 30ë¶„)
**ë‚œì´ë„**: ì´ˆê¸‰~ì¤‘ê¸‰ (React hooks, ìƒíƒœ ê´€ë¦¬ ì´í•´ í•„ìš”)
